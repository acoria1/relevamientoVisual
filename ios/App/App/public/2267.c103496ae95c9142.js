"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2267],{4132:(S,h,n)=>{n.d(h,{O:()=>v});var o=n(6895),_=n(2879),i=n(4650);function e(l,p){if(1&l&&(i.TgZ(0,"div",4),i._uU(1),i.qZA()),2&l){const a=i.oxw();i.xp6(1),i.Oqu(a.optionalMessage)}}let v=(()=>{class l{constructor(){this.optionalMessage="",this.spinnerType="lines-sharp"}ngOnInit(){}}return l.\u0275fac=function(a){return new(a||l)},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-spinner"]],inputs:{optionalMessage:"optionalMessage",spinnerType:"spinnerType"},standalone:!0,features:[i.jDz],decls:5,vars:2,consts:[[1,"container","spinner"],["class","row h1 mb-4",4,"ngIf"],[3,"name"],[1,"row"],[1,"row","h1","mb-4"]],template:function(a,s){1&a&&(i.TgZ(0,"div",0)(1,"div"),i.YNc(2,e,2,1,"div",1),i._UZ(3,"ion-spinner",2)(4,"div",3),i.qZA()()),2&a&&(i.xp6(2),i.Q6J("ngIf",""!=s.optionalMessage),i.xp6(1),i.Q6J("name",s.spinnerType))},dependencies:[_.Pc,_.PQ,o.ez,o.O5]}),l})()},3726:(S,h,n)=>{n.d(h,{n:()=>o});class o{constructor(i,e,v,l,p,a,s=!1,f,u="User"){this.uid=f,this.email=i,this.nombre=e,this.apellido=v,this.edad=l,this.dni=p,this.imagenes=a,this.isAdmin=s,this.typename=u}static filterPrivate(i){return Object.fromEntries(Object.entries(i).filter(([e])=>!["uid"].includes(e)))}}},2267:(S,h,n)=>{n.r(h),n.d(h,{HomePage:()=>a});var o=n(2879),_=n(4132),i=n(6895),e=n(4650),v=n(3651);function l(s,f){if(1&s){const u=e.EpF();e.ynx(0),e.TgZ(1,"ion-header",2)(2,"ion-toolbar")(3,"ion-buttons",3)(4,"ion-button"),e._UZ(5,"ion-icon",4),e.qZA()(),e.TgZ(6,"ion-buttons",5)(7,"ion-menu-toggle")(8,"ion-button"),e._UZ(9,"ion-icon",6),e.qZA()()()()(),e.TgZ(10,"ion-menu",7)(11,"ion-header")(12,"ion-toolbar")(13,"ion-title",8),e._uU(14,"Opciones"),e.qZA()()(),e.TgZ(15,"ion-content",9)(16,"ion-list")(17,"ion-item",10)(18,"ion-label"),e._uU(19,"Mi Perfil"),e.qZA(),e._UZ(20,"ion-icon",11),e.qZA(),e.TgZ(21,"ion-menu-toggle")(22,"ion-item",12),e.NdJ("click",function(){e.CHM(u);const g=e.oxw();return e.KtG(g.handleSingOut())}),e.TgZ(23,"ion-label"),e._uU(24,"Cerrar Sesi\xf3n"),e.qZA(),e._UZ(25,"ion-icon",13),e.qZA()()()()(),e.TgZ(26,"ion-content",14)(27,"ion-grid",15)(28,"ion-row",16),e._UZ(29,"ion-img",17),e.qZA(),e._UZ(30,"ion-row",18),e.TgZ(31,"ion-row",16),e._UZ(32,"ion-img",19),e.qZA()()(),e.BQk()}2&s&&(e.xp6(1),e.Q6J("translucent",!1))}function p(s,f){1&s&&(e.TgZ(0,"ion-content"),e._UZ(1,"app-spinner",20),e.qZA()),2&s&&(e.xp6(1),e.Q6J("optionalMessage","Cerrando Sesi\xf3n"))}let a=(()=>{class s{constructor(u){this._auth=u,this.signingOut=!1}handleSingOut(){this.signingOut=!0,setTimeout(()=>{this.signingOut=!1,this._auth.SignOut()},2e3)}}return s.\u0275fac=function(u){return new(u||s)(e.Y36(v.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-home"]],standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["spinner",""],[3,"translucent"],["slot","start"],["slot","icon-only","name","images-outline"],["slot","end"],["slot","icon-only","name","settings-outline"],["contentId","main-content","side","end"],[1,"h1"],[1,"ion-padding"],["button","","detail","false"],["slot","end","name","person-circle-outline","color","primary"],["button","","detail","false",3,"click"],["slot","end","name","exit-outline","color","primary"],["id","main-content",1,"content-with-full-height"],[1,"content-with-full-height"],[1,"bg-image"],["src","/assets/images/love_it.jpg","alt","Love it Image"],[1,"divisor",2,"height","2%"],["src","/assets/images/hate_it.jpg","alt","Hate it Image"],[3,"optionalMessage"]],template:function(u,P){if(1&u&&(e.YNc(0,l,33,1,"ng-container",0),e.YNc(1,p,2,1,"ng-template",null,1,e.W1O)),2&u){const g=e.MAs(2);e.Q6J("ngIf",!P.signingOut)("ngIfElse",g)}},dependencies:[o.Pc,o.YG,o.Sm,o.W2,o.jY,o.Gu,o.gu,o.Xz,o.Ie,o.Q$,o.q_,o.z0,o.zc,o.Nd,o.wd,o.sr,_.O,i.ez,i.O5],styles:["ion-grid[_ngcontent-%COMP%]{padding:0}ion-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{height:49%}ion-img[_ngcontent-%COMP%]{object-fit:cover;max-height:100%}.content-with-full-height[_ngcontent-%COMP%]{height:100%}.divisor[_ngcontent-%COMP%]{background-color:#ffdd86}ion-menu[_ngcontent-%COMP%]::part(backdrop){background-color:#ff00ff80}ion-menu[_ngcontent-%COMP%]::part(container){border-radius:20px 0 0 20px;box-shadow:4px 0 16px #ff00ff2e}"]}),s})()},3651:(S,h,n)=>{n.d(h,{e:()=>P});var o=n(5861),_=n(3726),i=n(8277),a=(n(2090),n(9681),n(1877),n(4859),n(4650)),s=n(3101),f=n(1205),u=n(6159);let P=(()=>{class g{constructor(t,r,c,d,m){this.afs=t,this.afAuth=r,this.router=c,this.ngZone=d,this._db=m,this.afAuth.authState.subscribe(O=>{var A;O?(this.userData=O,localStorage.setItem("auth",JSON.stringify(this.userData)),this.sub=this._db.collection("users").doc(O.uid).get().subscribe(Z=>{localStorage.setItem("user",JSON.stringify(Z.data())),console.log("sign in")})):(null===(A=this.sub)||void 0===A||A.unsubscribe(),localStorage.setItem("auth","null"),localStorage.setItem("user","null"),console.log("sign out"))})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("auth"))}get isVerified(){const t=JSON.parse(localStorage.getItem("auth"));return null!==t&&t.emailVerified}get isAdmin(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&t.isAdmin}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}SignUp(t,r){var c=this;return(0,o.Z)(function*(){try{let d=yield c.afAuth.createUserWithEmailAndPassword(t.email,r);return c.SendVerificationMail(),yield d.user.updateProfile({displayName:t.nombre,photoURL:t.imagenes[0]}),c.SetUserData(d.user.uid,t),c.router.navigate(["home"]),new Promise((m,O)=>{m("success")})}catch(d){return new Promise((m,O)=>{m(JSON.parse(JSON.stringify(d)))})}})()}GoogleAuth(){return this.AuthLogin(new i.V)}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{var c,d;let m=r.user;this.SetUserData(m.uid,new _.n(m.email,null!==(c=m.displayName)&&void 0!==c?c:"","",0,"",[null!==(d=m.photoURL)&&void 0!==d?d:""])),console.log(r.user)}).catch(r=>{window.alert("An error occured when attemping sign in")})}SetUserData(t,r){const c=this.afs.doc(`users/${t}`);return r.uid=t,console.log("user updated in db"),c.set(JSON.parse(JSON.stringify(r)),{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("auth"),this.router.navigate(["login"])})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{console.log("correo de verificacion enviado")})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}}return g.\u0275fac=function(t){return new(t||g)(a.LFG(s.ST),a.LFG(f.zQ),a.LFG(u.F0),a.LFG(a.R0b),a.LFG(s.ST))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);